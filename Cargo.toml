[workspace]
members = [
    "api/grpc",
    "components/devices",
    "components/fixtures",
    "components/fixtures/open-fixture-library",
    "components/media",
    "networking/execution-planner",
    "networking/session",
    "pipeline",
    "pipeline/node-api",
    "pipeline/nodes/behaviors/conversion",
    "pipeline/nodes/behaviors/scripting",
    "pipeline/nodes/behaviors/sequence",
    "pipeline/nodes/clock",
    "pipeline/nodes/fixture",
    "pipeline/nodes/inputs",
    "pipeline/nodes/laser",
    "pipeline/nodes/oscillator",
    "pipeline/nodes/protocols/artnet",
    "pipeline/nodes/protocols/midi",
    "pipeline/nodes/protocols/opc",
    "pipeline/nodes/protocols/osc",
    "pipeline/nodes/protocols/sacn",
    "pipeline/nodes/pixels",
    "pipeline/nodes/video",
    "projects",
    "protocols/laser",
    "protocols/midi",
    "protocols/midi/device-profiles",
]

[lib]
name = "mizer"
path = "src/lib.rs"
bench = false

[[bin]]
name = "mizer"
path = "src/main.rs"
bench = false

[package]
name = "mizer"
version = "0.1.0"
authors = ["Max JÃ¶hnk <maxjoehnk@gmail.com>"]
edition = "2018"

[features]
default = ["export_metrics"]
export_metrics = ["metrics-runtime", "smol"]

[dependencies]
derive_more = "0.99"
env_logger = "0.7"
log = "0.4"
anyhow = "1"
gstreamer = "0.16"
smol = { version = "0.3", features = ["tokio02"], optional = true }
structopt = "0.3"
metrics = "0.12"
metrics-runtime = { version = "0.13", optional = true }
mizer-media = { path = "components/media" }
mizer-project-files = { path = "projects" }
mizer-fixtures = { path = "components/fixtures" }
mizer-open-fixture-library-provider = { path = "components/fixtures/open-fixture-library" }
mizer-pipeline = { path = "pipeline" }
mizer-grpc-api = { path = "api/grpc" }
mizer-session = { path = "networking/session" }
mizer-devices = { path = "components/devices" }
# TODO: check for a better way/a maintained library
multi_mut = "0.1"
tokio = { version = "0.2", features = ["rt-threaded", "macros", "time"] }

[dev-dependencies]
criterion = "0.3"

[[bench]]
name = "dmx_pixel_pushing"
harness = false
